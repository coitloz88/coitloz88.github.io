<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용" /><meta property="og:locale" content="en" /><meta name="description" content="이전 글에서 Flask 로컬 서버에서 랜덤한 숫자를 발생시키고 해당 숫자를 안드로이드 에뮬레이터에서 받아오는 예제를 진행해보았다." /><meta property="og:description" content="이전 글에서 Flask 로컬 서버에서 랜덤한 숫자를 발생시키고 해당 숫자를 안드로이드 에뮬레이터에서 받아오는 예제를 진행해보았다." /><link rel="canonical" href="https://coitloz88.github.io/posts/flask-android-2/" /><meta property="og:url" content="https://coitloz88.github.io/posts/flask-android-2/" /><meta property="og:site_name" content="Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-14T16:55:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-04-15T15:16:19+09:00","datePublished":"2022-04-14T16:55:00+09:00","description":"이전 글에서 Flask 로컬 서버에서 랜덤한 숫자를 발생시키고 해당 숫자를 안드로이드 에뮬레이터에서 받아오는 예제를 진행해보았다.","headline":"Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용","mainEntityOfPage":{"@type":"WebPage","@id":"https://coitloz88.github.io/posts/flask-android-2/"},"url":"https://coitloz88.github.io/posts/flask-android-2/"}</script><title>Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용 | Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Devlog"><meta name="application-name" content="Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profileIMG.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Devlog</a></div><div class="site-subtitle font-italic">CS Study Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/coitloz88" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.acmicpc.net/user/coitloz32" aria-label="baekjoon" target="_blank" rel="noopener"> <i class="fas fa-code"></i> </a> <a href="https://coitloz88.notion.site/Profile-Hyemin-Lee-9e2a275d08d04ae48685d02ec1ccc651" aria-label="notion" target="_blank" rel="noopener"> <i class="fas fa-book"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cotloz88','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/coitloz88">coitloz88</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1649922900" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-04-14 </em> </span> <span> Updated <em class="timeago" data-ts="1650003379" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-04-15 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="950 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><p><a href="https://coitloz88.github.io/posts/flask-android-1/">이전 글</a>에서 Flask 로컬 서버에서 랜덤한 숫자를 발생시키고 해당 숫자를 안드로이드 에뮬레이터에서 받아오는 예제를 진행해보았다.</p><p><br /></p><p>이번에 추가한 내용은 다음과 같다.</p><ul><li>.json Format의 지정해둔 key 값을 통해 랜덤한 숫자 value만을 받아온다.<li>이를 안드로이드 앱에서 <code class="language-plaintext highlighter-rouge">Random Number: X</code> 형태로 출력한다.<li>ConstraintLayout 대신 SwipeRefreshLayout을 사용하여 당겨서 새로고침 기능을 추가했다. 이를 통해 앱 종료 후 재실행이 아닌 단순 새로고침으로 난수가 계속해서 바뀌는 것을 확인할 수 있다.</ul><p>코드는 <a href="https://github.com/coitloz88/Flask-Android-link/tree/main/AndroidApp">이 쪽</a>.</p><hr /><h1 id="flaskjupyter-notebook-python-서버-part">Flask(Jupyter notebook, python) 서버 part</h1><p>jupyter notebook에서 실행했다. 이전과 크게 달라진 점은 없으며, value를 string으로 변환하지 않고 랜덤하게 발생한 int값을 그대로 넘긴다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">flask</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">flask</span><span class="p">.</span><span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_randomNumber</span><span class="p">():</span>
    <span class="n">ranStr</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">flask</span><span class="p">.</span><span class="n">jsonify</span><span class="p">({</span><span class="s">'tk'</span><span class="p">:</span><span class="n">ranStr</span><span class="p">}),</span> <span class="mi">200</span>
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span> <span class="o">=</span> <span class="s">'0.0.0.0'</span><span class="p">)</span>
</pre></table></code></div></div><p>로컬 서버를 구동하고 있는 상태에서 안드로이드 앱을 실행하자. 자꾸 까먹는다.</p><p><br /></p><h2 id="todo"><span class="mr-2">TODO</span><a href="#todo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>AWS를 이용하여 실제 퍼블릭 서버 배포</p><p><br /></p><hr /><h1 id="androidandroid-studio-java-어플리케이션-part">Android(Android studio, java) 어플리케이션 part</h1><h2 id="onresponse에서--json-object를-받아와-파싱하기-참고"><span class="mr-2"><code class="language-plaintext highlighter-rouge"><span class="mr-2">onResponse()</code>에서 JSON Object를 받아와 파싱하기 <a href="https://infos.tistory.com/4004"><span class="mr-2">(참고)</a></span><a href="#onresponse에서--json-object를-받아와-파싱하기-참고" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>추가된 코드는 다음과 같다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="o">...</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResponse</span><span class="o">(</span><span class="nc">String</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="nc">JSONObject</span> <span class="n">jsonObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONObject</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">((</span><span class="nc">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tv_test_message</span><span class="o">)).</span><span class="na">setText</span><span class="o">(</span><span class="s">"Random Number: "</span> <span class="o">+</span> <span class="n">jsonObject</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"tk"</span><span class="o">));</span>
        <span class="c1">//python 코드에서 json의 key값을 'tk'로 설정해줬기 때문에 해당 key로 난수 value를 받아온다.</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JSONException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Err ErrorListener:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="o">...</span>
</pre></table></code></div></div><p><br /></p><h2 id="swiperefreshlayout-사용하기참고"><span class="mr-2">SwipeRefreshLayout 사용하기<a href="https://stickode.tistory.com/20"><span class="mr-2">(참고)</a></span><a href="#swiperefreshlayout-사용하기참고" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="buildgrandleapp에-dependency-추가"><span class="mr-2">build.grandle(:app)에 dependency 추가</span><a href="#buildgrandleapp에-dependency-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>해당 파일의 <code class="language-plaintext highlighter-rouge">dependencies{ ... }</code> 부분에 다음 문구를 추가한 뒤 <code class="language-plaintext filepath highlighter-rouge">Sync now</code>로 다운로드 받는다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>implementation "androidx.swiperefreshlayout:swiperefreshlayout:1.1.0"
</pre></table></code></div></div><h3 id="activity_mainxml-수정하기"><span class="mr-2"><code class="language-plaintext highlighter-rouge"><span class="mr-2">Activity_main.xml</code> 수정하기</span><a href="#activity_mainxml-수정하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>우선 <code class="language-plaintext highlighter-rouge">activity_main.xml</code>을 수정해줘야한다.<br /> Code를 직접 수정해준다. 본래 <code class="language-plaintext filepath highlighter-rouge">&lt;androidx.constraintlayout.widget ... &gt;</code>으로 되어있을텐데, 이 부분을 포함하여 Textview의 설정도 ConstraintLayout에서 SwipeRefreshLayout으로 바뀌므로 일부 바꿔준다.</p><p>본래는 새로고침할 View 영역을 SwipeRefreshLayout으로 감싸줘야 하는데, 내 경우는 textview 하나 있는 거 감싸주는 거라 통째로 고쳐주었다.</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:id=</span><span class="s">"@+id/swipeLayout"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">tools:context=</span><span class="s">".MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/tv_test_message"</span>
        <span class="na">android:gravity=</span><span class="s">"center"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"Empty Message"</span>
        <span class="na">android:textSize=</span><span class="s">"20sp"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/TextView&gt;</span>

<span class="nt">&lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;</span>
</pre></table></code></div></div><h3 id="mainactivityjava-수정하기"><span class="mr-2"><code class="language-plaintext highlighter-rouge"><span class="mr-2">MainActivity.java</code> 수정하기</span><a href="#mainactivityjava-수정하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ol><li><p>MainActivity 클래스가 SwipeRefreshLayout.OnRefreshListener 인터페이스를 implement하게 수정</p><li><p>SwipeRefreshLayout을 객체로 생성</p><li><p><code class="language-plaintext highlighter-rouge">onCreate( ... )</code> 메서드에서 SwipeRefreshLayout에 <code class="language-plaintext highlighter-rouge">setOnRefreshListener()</code> 메서드를 통해 리스너를 달아준다.</p><li><p><code class="language-plaintext highlighter-rouge">onRefresh()</code> 메서드에서 새로고침 시 변경되는 사항을 작성한다. 해당 메서드에 작성한 내용은 사용자가 화면을 위에서 아래로 당기면 호출된다.</p></ol><blockquote class="prompt-tip"><div><p>SwipeRefreshLayout을 사용해서 새로고침을 구현하는 경우, <code class="language-plaintext highlighter-rouge">setRefreshing()</code> 메서드로 화면을 update하고 새로고침이 끝났다면 반드시 <code class="language-plaintext highlighter-rouge">setRefreshing()</code> 메서드 인자에 <code class="language-plaintext filepath highlighter-rouge">false</code>를 세팅해주어야 한다. (Boolean 값으로 상단 원형 ProgressBar의 Visibility를 설정함)</p></div></blockquote><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.example.flaskservertest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">androidx.appcompat.app.AppCompatActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">androidx.swiperefreshlayout.widget.SwipeRefreshLayout</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="kd">implements</span> <span class="nc">SwipeRefreshLayout</span><span class="o">.</span><span class="na">OnRefreshListener</span> <span class="o">{</span>

    <span class="nc">SwipeRefreshLayout</span> <span class="n">srl</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>

        <span class="n">srl</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">swipeLayout</span><span class="o">);</span>
        <span class="n">srl</span><span class="o">.</span><span class="na">setOnRefreshListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRefresh</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">updateLayoutView</span><span class="o">();</span>
        <span class="n">srl</span><span class="o">.</span><span class="na">setRefreshing</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateLayoutView</span><span class="o">(){</span>
        <span class="c1">//새로고침 시 실행할 내용 작성</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><h2 id="todo-1"><span class="mr-2">TODO</span><a href="#todo-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>실제 디바이스에 설치</p><p><br /></p><hr /><h1 id="references">References</h1><ul><li><a href="https://developer.android.com/training/swipe/add-swipe-interface?hl=ko#AddRefreshAction">https://developer.android.com/training/swipe/add-swipe-interface?hl=ko#AddRefreshAction</a><li><a href="https://infos.tistory.com/4004">https://infos.tistory.com/4004</a><li><a href="https://stickode.tistory.com/20">https://stickode.tistory.com/20</a><li><a href="https://kobbi-reply.tistory.com/28">https://kobbi-reply.tistory.com/28</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/etc/'>etc</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/flask/" class="post-tag no-text-decoration" >flask</a> <a href="/tags/volley/" class="post-tag no-text-decoration" >volley</a> <a href="/tags/json/" class="post-tag no-text-decoration" >json</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용 - Devlog&amp;url=https://coitloz88.github.io/posts/flask-android-2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용 - Devlog&amp;u=https://coitloz88.github.io/posts/flask-android-2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://coitloz88.github.io/posts/flask-android-2/&amp;text=Android에서 Flask 서버 접속하기 2 - SwipeRefreshLayout 사용 - Devlog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/backend-2/">웹 백엔드 1-2 Maven 및 기초 환경 세팅</a><li><a href="/posts/pytorch-tutorial-6/">Pytorch tutorials 06 | 모델 매개변수 최적화하기</a><li><a href="/posts/baekjoon11729/">백준 11729</a><li><a href="/posts/pytorch-tutorial-4/">Pytorch tutorials 04 | 신경망 모델 구성하기</a><li><a href="/posts/pytorch-tutorial-1/">Pytorch tutorials 01 | Tensor</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/ml/">ML</a> <a class="post-tag" href="/tags/pytorch/">pytorch</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/codelab/">codelab</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/baekjoon/">baekjoon</a> <a class="post-tag" href="/tags/flask/">flask</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/flask-android-1/"><div class="card-body"> <em class="timeago small" data-ts="1649914200" > 2022-04-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android에서 Flask 서버 접속하기 1 - Emulator</h3><div class="text-muted small"><p> Flask 로컬 서버에서 랜덤한 숫자를 발생시키고 해당 숫자를 안드로이드 에뮬레이터에서 받아오는 예제를 진행해보았다. 최종 목표는 퍼블릭 서버에서, 실제 디바이스에 설치된 앱이 값을 받아오는 것. 참고한 코드는 여기. Android에서 volley.Response.Listener를 사용하여 응답이 왔을 때 이를 받아 처리를 등록했다. Vol...</p></div></div></a></div><div class="card"> <a href="/posts/android-basic-1/"><div class="card-body"> <em class="timeago small" data-ts="1650000900" > 2022-04-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android 기초 1.1 시작하기</h3><div class="text-muted small"><p> Android에 관해서는 동아리에서 어느정도 공부했었지만, 체계적으로 기초부터 공부한 게 아니라 중구난방으로 배운 감이 없잖아 있어서 Google에서 제공하는 Codelab을 보면서 다시 공부해보기로 했다. 사용할 언어는 Java. 요즘 안드로이드는 Kotlin으로 거의 넘어간 것 같긴 하지만, Java가 익숙한 편이라 우선 Java로 공부하면서 여...</p></div></div></a></div><div class="card"> <a href="/posts/android-recyclerview/"><div class="card-body"> <em class="timeago small" data-ts="1650000900" > 2022-04-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android | RecyclerView</h3><div class="text-muted small"><p> RecyclerView 개념 RecyclerView를 사용하면 대량의 데이터 세트를 효율적으로 표시할 수 있다. RecyclerView는 개별 요소를 재활용하여, 항목이 스크롤되어 화면에서 벗어나더라도 RecyclerView는 뷰를 제거하지 않는다. 대신 스크롤된 새 항목의 뷰를 재사용한다. RecyclerView 활용 1. 레이아웃 영역 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/flask-android-1/" class="btn btn-outline-primary" prompt="Older"><p>Android에서 Flask 서버 접속하기 1 - Emulator</p></a> <a href="/posts/android-basic-1/" class="btn btn-outline-primary" prompt="Newer"><p>Android 기초 1.1 시작하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/coitloz88">coitloz88</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/ml/">ML</a> <a class="post-tag" href="/tags/pytorch/">pytorch</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/codelab/">codelab</a> <a class="post-tag" href="/tags/computer/">computer</a> <a class="post-tag" href="/tags/baekjoon/">baekjoon</a> <a class="post-tag" href="/tags/flask/">flask</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
